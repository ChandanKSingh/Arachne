<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Arachne: Arachne: Towards Core-Aware Scheduling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Arachne
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="group__api.html"><span>Arachne&#160;Public&#160;API</span></a></li>
      <li><a href="md_wiki_Main.html"><span>Design&#160;Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Arachne: Towards Core-Aware Scheduling </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>What is core aware scheduling?</h2>
<p>In today's large-scale data center systems, there are many complex software components which make a binary trade-off between latency and throughput. They either overprovision their systems to obtain lower latencies and consequently waste resources, or oversubscribe their systems and experience very high latencies due to imbalance between application load and system resources.</p>
<p>Core-aware scheduling is the notion that we can balance an application's offered load to a system's available resources by scheduling threads at user level, and performing coarse-grained core allocation at operating system level.</p>
<p>Under this approach, the kernel no longer preemptively multiplexes between threads without any awareness of what the application is doing. This enables us to avoid the performance degradations caused by slow context switches, priority inversion, and cache pollution from the threads of other processes.</p>
<h2>What is Arachne?</h2>
<p>Arachne is the first step towards core-aware scheduling, allowing an application to run only as many threads in parallel as cores available to it.</p>
<p>Arachne is a user-level, cooperative threading library written in C++, designed to improve core utlization and maximize throughput in server applications without impacting latency. Today, it performs M:N scheduling over kernel threads and features ~200 ns cross-core thread creations and ~100 ns cross-core signals on Nehalem X3470.</p>
<p>Today, it is highly performant only as long as threads do not need to block in the kernel, but this limitation is expected to go away in the next few months.</p>
<h2>How do I use it?</h2>
<ol type="1">
<li>Clone and build <a href="https://github.com/PlatformLab/PerfUtils">PerfUtils</a> in a directory structure parallel to this one, so the overall directory structure looks like the following. <pre class="fragment"> application_directory/
     Arachne/
     PerfUtils/
</pre></li>
<li>Build the library with <code>make</code> in the top-level directory.</li>
<li><p class="startli">Write your application using the public Arachne API, documented <a href="https://platformlab.github.io/Arachne/group__api.html">here</a>.</p>
<p class="startli">#include &lt;stdio.h&gt; #include "Arachne.h"</p>
<p class="startli">void numberPrinter(int n) { printf("NumberPrinter says %d\n", n); }</p>
<p class="startli">// This is where user code should start running. void AppMain(int argc, const char** argv) { printf("Arachne says hello world and creates a thread.\n"); auto tid = Arachne::createThread(numberPrinter, 5); Arachne::join(tid); }</p>
<p class="startli">// The following bootstrapping code should be copied verbatim into most Arachne // applications. void AppMainWrapper(int argc, const char** argv) { AppMain(argc, argv); <a class="el" href="group__api.html#gaf382f9c6509ffc8f1d3be42485311711">Arachne::shutDown()</a>; } int main(int argc, const char** argv){ Arachne::init(&amp;argc, argv); Arachne::createThread(&amp;AppMainWrapper, argc, argv); <a class="el" href="group__api.html#ga2d1d6e02a5b1043b1a432bf176530f03">Arachne::waitForTermination()</a>; }</p>
</li>
<li>Link your application against Arachne. <pre class="fragment"> g++ -std=c++11 -o MyApp -IArachne MyApp.cc  -LArachne -lArachne -LPerfUtils -lPerfUtils -pthread
</pre></li>
</ol>
<h2>What is on the roadmap?</h2>
<ul>
<li>A kernel patch to enable core exclusivity.</li>
<li>A kernel patch to handle blocking IO.</li>
<li>One or more heuristics for determining when to scale up and scale down the number of cores. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
